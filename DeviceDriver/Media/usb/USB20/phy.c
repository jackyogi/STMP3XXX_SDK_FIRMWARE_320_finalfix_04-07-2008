////////////////////////////////////////////////////////////////////////////////
// Copyright(C) SigmaTel, Inc. 2002 - 2003
//
// File : usb20dd.c
// Description : USB2.0 device Controller Interface functions
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
//  Macros
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
//  Includes
////////////////////////////////////////////////////////////////////////////////
#include "types.h"
#include "regsusb20phy.h"
#include "regsclkctrl.h"
#include "phy.h"

RETCODE PHY_Shutdown(void)
{
    HW_CCR.B.CKSRC = 0;
    HW_CCR.B.PLLEN = 0;

    HW_USBPHYRX.B.PLLLOCKED=FALSE;

    HW_USBPHYPWD.I = 0x2bffdf;           // Power off the PHY
                                        //but leave enough on to allow us to still
                                        //detect the line state bits
    HW_USBPHYRX.B.FSCKSOURCESEL=1;

    return SUCCESS;
}
