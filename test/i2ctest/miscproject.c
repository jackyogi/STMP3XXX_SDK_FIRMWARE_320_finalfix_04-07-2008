////////////////////////////////////////////////////////////////////////////////
// Copyright(C) SigmaTel, Inc. 2002
//
// Filename: miscproject.c
// Description: Misc Project-specific
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
//   Includes and external references
////////////////////////////////////////////////////////////////////////////////

#include "types.h"
#include "hwequ.h"
#include "sysserialnumber.h"

////////////////////////////////////////////////////////////////////////////////
// Externs
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Defs
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Prototypes
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Variables
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Code
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
//
//>  Name:          MiscProjectInit
//
//   Type:          Function
//
//   Description:   
//
//   Inputs:        none
//
//   Outputs:       RETCODE
//
//   Notes:         none
//<
////////////////////////////////////////////////////////////////////////////////
RETCODE _reentrant MiscProjectInit(void)
{

    // Generically enable serial numbers for all media
    SerialNumberEnableInit();
    
    // Initialize the chip serial number
    ChipSerialNumberInit();

    // Initialize the internal media serial number
    InternalMediaSerialNumberInit();
    
    return SUCCESS;
}

////////////////////////////////////////////////////////////////////////////////
//
//>  Name:          SerialNumberEnableInit
//
//   Type:          Function
//
//   Description:   This function provides a mechanism for initializing any
//                  project-specific mechanisms that may be used to enable/disable
//                  serial numbers.  The SerialNumbersEnabled function is also
//                  provided.
//
//   Inputs:        none
//
//   Outputs:       RETCODE
//
//   Notes:         none
//<
////////////////////////////////////////////////////////////////////////////////
RETCODE _reentrant SerialNumberEnableInit(void)
{
    return SUCCESS;
}

////////////////////////////////////////////////////////////////////////////////
//
//>  Name:          SerialNumbersEnabled
//
//   Type:          Function
//
//   Description:   This function gives the option for the system to determine
//                  at run time if serial numbers are available (possibly by
//                  sensing a GPIO).
//
//   Inputs:        none
//
//   Outputs:       BOOL        TRUE if serial numbers enabled
//                              FALSE if serial numbers disabled
//
//   Notes:         none
//<
////////////////////////////////////////////////////////////////////////////////
BOOL _reentrant SerialNumbersEnabled(void)
{
    #ifdef WMAAPI_NO_DRM
        return FALSE;
    #else
        return TRUE;
    #endif    
}

